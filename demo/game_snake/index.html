<!DOCTYPE html>
<html lang="zh-CN" xml:lang="zh-CN">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />
<meta name="description" content="" />
<meta name="keywords" content=""/>
<title>小米应用商店</title>
<link rel="shortcut icon" href="http://www.xiaomi.com/favicon.ico" />
<style type="text/css">
body{ background: url(./bg.png) center 0 #e31848 no-repeat; font-family: "Hiragino Sans GB","Microsoft YaHei","WenQuanYi Micro Hei",sans-serif}
p{ margin: 0;}
.accumulate{
  width: 978px;
  margin: 211px auto 0;
}
.accumulate span{
  display: inline-block;
  height: 167px;
  background-image: url(./number.png) ;
  background-repeat: no-repeat;
  text-indent: -9999px;
}
.accumulate-dot{ background-position: -823px 0;width: 32px;}
.accumelate-num-1{ background-position: 0px 0;width: 55px;}
.accumelate-num-2{ background-position: -158px 0; width: 76px;}
.accumelate-num-3{ background-position: -232px 0; width: 75px;}
.accumelate-num-4{ background-position: -307px 0; width: 80px;}
.accumelate-num-5{ background-position: -396px 0; width: 77px;}
.accumelate-num-6{ background-position: -471px 0; width: 75px;}
.accumelate-num-7{ background-position: -546px 0; width: 78px;}
.accumelate-num-8{ background-position: -634px 0; width: 77px;}
.accumelate-num-9{ background-position: -710px 0; width: 76px;}
.accumelate-num-0{ background-position: -69px 0; width: 76px;}
 
.stage{
  overflow: hidden;
  position: relative;
  width: 1006px;
  height: 562px;
  margin: 63px auto 0;
  background: url(stage.png) 0 0 no-repeat;
  border-radius: 15px;
 }
 
 .adward-title{ text-align: center; margin: 32px 0 56px 0; }
 .adward-title h1{ font-size: 48px; font-weight: normal; color: #fff; line-height: 1.2; margin: 12px 0 12px 0; }
 .adward-title p{ font-size: 18px; color: #f18ca4; margin: 6px 0  0}
 .adward-wrap{ width: 1000px; margin: 0 auto 100px; overflow: auto;}
 .adward{ width: 235px; border: 1px solid #ac193c; border-radius: 7px; border-top: 4px solid #9c1737; background: #ac193c; text-align: center; color: #fff; padding: 12px 0 38px; float: left; margin-right: 17px;}
 .adward h2{ margin: 3px 0; font-weight: normal; display: inline-block; *display: *inline; zoom: 1; border: 1px solid #cd244c;padding: 5px 27px;
 border-radius: 23px; }
 .adward img{margin: 0 auto;}
 .adward p{ color: #ff6a52; font-size: 21px; margin: 0;}
 .thumb{
   display: table-cell;
   height: 200px;
   width: 236px;
   vertical-align: middle;
 }
 .stage-begin{
   position: relative;
   width: 1006px;
   height: 562px;
   background: url(stage-begin.png) center 73px no-repeat;
 }
 .btn{
  width: 307px;
  height: 136px;
  border: none;
  background: url(btn-start.png) 0 0 no-repeat;
  position: absolute;
  bottom: 122px;
  left: 50%;
  margin-left: -146px;
  outline: none;
  cursor: pointer;
}
 .hide{ display: none; }
 .stage-ready{
   width: 1006px;
   height: 562px;
   background: url(ready.png) center 176px no-repeat;
 }
 .stage-go{
  width: 1006px;
  height: 562px;
   background: url(go.png) center 176px no-repeat;
 }
 .stage-share{
  position: absolute;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.55);
  padding-top: 43px;
  left: 0;
  top: 0;
 }
 .share{
  position: relative;
  width: 430px;
  height: 473px;
  border-radius: 18px;
  margin: 0 auto 0;
  overflow: hidden;
  background: url(share-bg2.png) #b1193d center 85px no-repeat;
 }
 .share-h{ height: 57px; background: url(share-bg1.png) #951332 center center no-repeat; }
 .close{
   width: 62px;
   height: 62px;
   position: absolute;
   right: -20px;
   top: -20px;
   background: url(close.png) 0 0 no-repeat;
 }
 .share-desc{
  text-align: center;
  font-size: 16px;
  color: #fff;
  background: #8d122f;
  width: 377px;
  padding: 8px 0;
  margin: 95px auto 42px;
  border-radius: 18px;
 }
 .btn-share, .btn-replay{
  cursor: pointer;
  display: block;
  width: 184px;
  height: 69px;
  border: none;
  outline: none;
  margin: 0 auto;
  margin-bottom: 10px;
 }
 .btn-share{
   background: url(btn-share.png) 0 0 no-repeat;
 }
 .btn-replay{
   background: url(btn-replay.png) 0 0 no-repeat;
 }
 .share-link{
   margin-top: 45px;
   text-align: center;
 }
 .share-link a{
   color: #fff;
 }
.audio{position: absolute;
  left: 50%;
  top: 419px;
  right: 13px;
  display: inline-block;
  width: 13px;
  height: 14px;
  background: url(sound.gif) 0 0;
  margin-left: 484px;
}
.stage-comfirm{
  width: 100%;
  height: 100%;
  background: url(stage-tip.png) center 20px no-repeat;
}
.btn-confirm{
  bottom: 28px;
  background: url(btn-confirm.png) 0 0 no-repeat;
}
/*游戏舞台和角色*/
table { overflow:hidden; border-collapse:collapse; }
td {width:48px; height:48px; border:1px solid #3f1922; background:#2a000a; }
td img{vertical-align: middle;}
.cover {background: url(snake.png) #78b639 500px 500px no-repeat;}
.header-up{ background-color:#2a000a;  background-position: 0 0 ;}
.header-right{ background-color:#2a000a; background-position: -64px 0px ;}
.header-down{ background-color:#2a000a; background-position: -64px -64px ;}
.header-left{ background-color:#2a000a; background-position: 0 -64px ;}
.tail-3{ background-color:#2a000a; background-position: -192px 0 ;}
.tail-2{ background-color:#2a000a; background-position: -128px -64px;}
.tail-1-up{ background-color:#2a000a; background-position: -126px -121px ;}
.tail-1-right{ background-color:#2a000a; background-position: -126px 0 ;}
.tail-1-down{ background-color:#2a000a; background-position: 0 -121px ;}
.tail-1-left{ background-color:#2a000a; background-position: -64px -121px ;}
 </style>
 </head>
 <body>
 <div id="J-accumulate" class="accumulate"></div>
<a href="javascript:;" class="audio" id="audio"></a>
 <div class="stage">
   <div class="stage-begin" id="stageBegin">
    <button type="button" class="btn" id="btnStart"></button>
   </div>
   <div class="stage-comfirm hide" id="stageComfirm">
    <button type="button" class="btn btn-confirm" id="btnConfirm"></button>
   </div>
   <div class="stage-ready hide" id="stageReady"></div>
   <div class="stage-go hide" id="stageGo"></div>
   <div class="stage-game" id="stageGame">
     <div id="snakeWrap"></div>
   </div>
   <div class="stage-share hide" id="stageShare">
     <div class="share">
       <div class="share-h"></div>
       <p class="share-desc">您当前共计吃了<span id="score"></span>个应用，超过了全球<span id="rank"></span>的人</p>
       <button class="btn-share" id="share"></button>
       <button class="btn-replay" id="btnReplay"></button>
       <div class="share-link">
         <a href="#">点击这里下载你吃过的应用有惊喜哦~</a>
       </div>
     </div>
   </div>
 </div>
 <div class="adward-title">
   <h1>游戏奖品</h1>
   <p>狂送100台小米手机4、5000万元礼券，分享微博赢小米电视</p>
 </div>
 
 <div class="adward-wrap">
   <div class="adward">
     <div class="thumb">
       <img src="tv.png" alt="小米电视2" width="width: 211;">
     </div>
     <h2>小米电视</h2>
     <p>×</p>
     <p>100台</p>
   </div>
   <div class="adward">
     <div class="thumb">
       <img src="mi4.png" alt="小米电视2">
     </div>
     <h2>小米电视</h2>
     <p>×</p>
     <p>100台</p>
   </div>
   <div class="adward">
     <div class="thumb">
       <img src="route.png" alt="小米电视2">
     </div>
     <h2>小米电视</h2>
     <p>×</p>
     <p>100台</p>
   </div>
   <div class="adward" style="margin-right: 0;">
     <div class="thumb">
       <img src="battery.png" alt="小米电视2">
     </div>
     <h2>小米电视</h2>
     <p>×</p>
     <p>100台</p>
   </div>
 </div>
 <script src="jquery.min.js"></script>
 <script src="snake.js"></script>
<script>
/**
* @param {JQuery} $container 包含数字的容器
* @param {int} num 要展示的数字
*/
var accumelate = function($container, num) {
  var nums = num.toString().split("").reverse();
  $container.empty();
  for (var i = 0, ii = nums.length; i < ii; i++) {
    var singleNum = nums[i];
  if (i != 0 && i % 3 === 0) {
    $container.prepend("<span class='accumulate-dot'>,</span>");
  }
  $container.prepend("<span class=accumelate-num-" + singleNum + ">" + singleNum + "</span>");
  };
}
accumelate($("#J-accumulate"), 12356549806);
// 数字递增器
var getAccumulate = function() {
  $.ajax({
    type: "GET",
    dataType: 'jsonp',
    url: 'http://rommgr.miui.com/api.php',
    cache: false,
    jsonp: "callback",
    jsonpCallback: "updateAccumulate",
    success: function(msg) {
      accumulate($("#J-accumulate"), msg.downCount);
    }
  })
};
// 分享新浪微博
$("#share").on("click", function() {
  var score = $("#score").text();
  var title = "#小米应用商店下载破100亿#[兔子]我一口气吃了"+ score +"个应用，获得了“巨能吃战神”称号，你能比过我吗？不服来战";
  var rLink = location.href;
  var pic = 'http://resource.xiaomi.net/miuimarket/app/hd/5billion/weibo.jpg';
  window.open('http://service.weibo.com/share/share.php?appkey='+encodeURIComponent(2443125526)+'&title='+encodeURIComponent(title)+'&url='+encodeURIComponent(rLink)+'&pic='+encodeURIComponent(pic),'_blank','scrollbars=no,width=600,height=450,status=no,resizable=yes');
});
// 背景音乐
$("#audio").on("click", function() {
  if(bgMusic.paused) {
    bgMusic.play();
  } else {
    bgMusic.pause();
  }
})
</script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?082b8941d83e0af5668962e73841f307";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
</body>
</html>
